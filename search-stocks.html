<!DOCTYPE html>

<html>
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT490 Stock Search Page</title>
    </head>

    <body>
        <h2>Search Stocks</h2>
        <input id="q" placeholder="Enter company or symbol">
        <button onclick="searchStocks()">Search</button>
        <div id="out"></div>

        <h2> Get Quote </h2>
        <input id="symbol" placeholder="Symbol (AAPL)">
        <button onclick="getQuote()">Get Quote</button>
        <div id="out2"></div>

        <script>
            async function searchStocks() {
                const query = document.getElementById('q').value.trim();
                if (!query) {
                    document.getElementById('out').innerText = 'Please enter a search query.';
                    return;
                }

                const response = await fetch(`search.php?q=${encodeURIComponent(query)}`);
                const data = await response.text();
                document.getElementById('out').innerText = data;
            }

            async function getQuote() {
                const symbol = document.getElementById('symbol').value.trim();
                if (!symbol) {
                    document.getElementById('out2').innerText = 'Please enter a stock symbol.';
                    return;
                }

                const response = await fetch(`api.php?action=quote&symbol=${encodeURIComponent(symbol)}`);
                const data = await response.text();
                document.getElementById('out2').innerText = data;
            }
        </script>
    </body>
</html>